Идея использования этого скрипта заключается в том, чтобы максимально упростить развертывание и администрирование микросервисов python, написанных с использованием Flask и запускаемых через uwsgi, сведя все управляющие манипуляции к одному файлу, а все настройки - к одному конфигу.

Если действие не указано или перехвачен какой-либо неизвестный аргумент, ничего сделано не будет.


Если флаги -c или -r не были переданы, вместо них будут использоваться значения по умолчанию.
Значения по умолчанию:

    -c - config['CONSUL_REG']
    -r - config['DELETE_RELOG_FILES']


## actions:


<u>start</u> - запускает службу через uwsgi

<u>stop</u> - останавливает службу с помощью pid-файла, который находится в папке tmp

<u>restart</u> - выполняет остановку, ожидает, пока порт освободится, и затем запускает. Никаких компромиссов, 100% перезапуск.

<u>hot_restart</u> - корректный перезапуск с помощью главного процесса uwsgi, без простоев. Только для исправлений, не восстанавливает конфигурацию uwsgi.

<u>status</u> - проверяет текущее состояние сервиса, предполагая, что конфигурация не изменилась, отображает текущий хэш из git

<u>tests</u> - выполняет тесты, описанные в tests.yaml.

<u>ruffles</u> - генерирует простой файл-оболочку для service.py, она просто передает все аргументы в service.py. Не более чем quality-of-life штука. Имя файла: ```config['neat_script_name'] или service```

<u>relog</u> - обрабатывает логи, имена которых указаны в RELOG_FILES (как регулярное выражение). Выполняет действия, описанные в service_lib.relog. Помещает результаты в */log/relog/:
```
    exceptions.log      - непойманные исключения
    internal_errors.log - ошибки, пойманные и показанные клиенту
```

## config

Пример файла: <u>config.sample.yaml</u><br/>
Реальный файл: <u>config.yaml</u><br>
Должен находиться в той же папке, что и service.py

Спецификация Yaml 1.1, с одним небольшим дополнением - вы можете использовать:
```
var: !join [one_part_, another_part]
```
значение var будет равно one_part_another_part. Вы можете использовать несколько частей, а также алиасы в качестве частей.

Дополнительная информация о yaml: https://yaml.org/spec/1.1/